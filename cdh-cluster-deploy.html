<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <link rel="shortcut icon" href="/favicon.ico"> <title>[BIG DATA] CDH 3.2.1 on CentOS 7.5 集群安装(半)离线部署 - LanKE.e 婪歌</title> <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@1,500&display=swap" rel="stylesheet"> <link href="https://fonts.googleapis.com/css2?family=Fira+Sans&display=swap" rel="stylesheet"> <link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet"> <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet"> <link rel="stylesheet" href="/assets/dist/css/style.css"> <!-- <link rel="stylesheet" href="/assets/dist/awsm.css/awsm_theme_big-stone.min.css" media="(prefers-color-scheme: dark)"> <link rel="stylesheet" href="/assets/dist/awsm.css/awsm_theme_white.min.css" media="(prefers-color-scheme: no-preference), (prefers-color-scheme: light)"> <link rel="stylesheet" href="/assets/dist/rouge/syntax-base16.dark.css" media="(prefers-color-scheme: dark)"> <link rel="stylesheet" href="/assets/dist/rouge/syntax-github.css" media="(prefers-color-scheme: no-preference), (prefers-color-scheme: light)"> --> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>[BIG DATA] CDH 3.2.1 on CentOS 7.5 集群安装(半)离线部署 | LanKE.e 婪歌</title> <meta name="generator" content="Jekyll v3.9.2" /> <meta property="og:title" content="[BIG DATA] CDH 3.2.1 on CentOS 7.5 集群安装(半)离线部署" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="* 本文基于 CentOS 7.5 云服务器集群, root 账户, 所有包管理工具, CDH版本和目录可能不一样, 请自行切换。" /> <meta property="og:description" content="* 本文基于 CentOS 7.5 云服务器集群, root 账户, 所有包管理工具, CDH版本和目录可能不一样, 请自行切换。" /> <link rel="canonical" href="https://lankee.blog/cdh-cluster-deploy.html" /> <meta property="og:url" content="https://lankee.blog/cdh-cluster-deploy.html" /> <meta property="og:site_name" content="LanKE.e 婪歌" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2019-06-28T00:00:00+08:00" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="[BIG DATA] CDH 3.2.1 on CentOS 7.5 集群安装(半)离线部署" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2019-06-28T00:00:00+08:00","datePublished":"2019-06-28T00:00:00+08:00","description":"* 本文基于 CentOS 7.5 云服务器集群, root 账户, 所有包管理工具, CDH版本和目录可能不一样, 请自行切换。","headline":"[BIG DATA] CDH 3.2.1 on CentOS 7.5 集群安装(半)离线部署","mainEntityOfPage":{"@type":"WebPage","@id":"https://lankee.blog/cdh-cluster-deploy.html"},"url":"https://lankee.blog/cdh-cluster-deploy.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <div class="content"> <header> <div class="main"> <a href="https://lankee.blog/">LanKE.e 婪歌</a> </div> <nav> <a class='' href="/">首页</a> <!-- <a class='' href="/archives.html"> Archives</a> --> <a class='' href="/about.html">关于</a> </nav> </header> <hr class="light-hr"> <main> <div class="title"> <h1 class="title">[BIG DATA] CDH 3.2.1 on CentOS 7.5 集群安装(半)离线部署</h1> <div class="meta"> <time datetime="28-06-2019">Jun 28 2019</time> </div> </div> <hr class="no-margin light-hr "> <p>* <em>本文基于 CentOS 7.5 云服务器集群, root 账户, 所有包管理工具, CDH版本和目录可能不一样, 请自行切换。</em></p> <p>* <em>可能出现纰漏, 详细可参考访问<a href="https://docs.cloudera.com/documentation/enterprise/6/6.0/topics/installation.html" target="_blank">官方安装文档</a>和 Google。</em></p> <hr /> <h2 id="集群环境准备-参考官方文档">集群环境准备, 参考<a href="https://docs.cloudera.com/documentation/enterprise/6/latest/topics/installation_reqts.html" target="_blank">官方文档</a></h2> <h3 id="集群ip映射">集群IP映射</h3> <p>为所有节点设置:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s2">"172.16.20.245 cdh-0001"</span> <span class="o">&gt;&gt;</span> /etc/hosts
<span class="nb">echo</span> <span class="s2">"172.16.20.28 cdh-0002"</span> <span class="o">&gt;&gt;</span> /etc/hosts
<span class="nb">echo</span> <span class="s2">"172.16.20.196 cdh-0003"</span> <span class="o">&gt;&gt;</span> /etc/hosts
<span class="nb">echo</span> <span class="s2">"172.16.20.170 cdh-0004"</span> <span class="o">&gt;&gt;</span> /etc/hosts 
</code></pre></div></div> <h3 id="配置集群ssh免密登录">配置集群ssh免密登录</h3> <p>获取密钥文件, 所有节点执行:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh-keygen <span class="nt">-t</span> rsa
</code></pre></div></div> <p>将所有节点的 .ssh/id_rsa.pub 文件传到主节点, 然后将每个节点的 id_rsa.pub 加入到 .ssh/authorized_keys 文件中:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>id_rsa.pub <span class="o">&gt;&gt;</span> authorized_keys
</code></pre></div></div> <p>将这个包含所有节点公钥的 authorized_keys 文件上传到每个节点的 .ssh 目录下</p> <p><em>(这里使用的是root账户, 如使用其他账户, 请注意目录和.ssh文件夹的权限问题)</em></p> <h3 id="关闭-selinux">关闭 SELinux</h3> <p>所有节点设置</p> <p>先查看 <code class="language-plaintext highlighter-rouge">SELinux</code> 状态, 如果为 <code class="language-plaintext highlighter-rouge">disabled</code> 则无需修改, 命令:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/usr/sbin/sestatus <span class="nt">-v</span>
</code></pre></div></div> <p>否则就 <em>/etc/selinux/config</em> 文件中的 <code class="language-plaintext highlighter-rouge">SELINUX=enforcing</code> 改为 <code class="language-plaintext highlighter-rouge">SELINUX=disabled</code></p> <h3 id="配置集群时间同步">配置集群时间同步</h3> <p>所有节点安装Chrony:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum <span class="nt">-y</span> <span class="nb">install </span>chrony
</code></pre></div></div> <p>主节点配置 <em>/etc/chrony.conf</em> 文件: 按需设置 <code class="language-plaintext highlighter-rouge">NTP Server</code>, 可以保持使用默认4个 Server 配置, 也配置多个</p> <p>允许从节点IP访问: <em>allow 172.16.20.0/24</em></p> <p>从节点配置 <em>/etc/chrony.conf</em> 文件: 注释其他 server, 只把一个 server 指向主节点IP: <code class="language-plaintext highlighter-rouge">server 172.16.20.245 iburst</code></p> <p>所有节点启动 Chrony 服务:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>systemctl <span class="nb">enable </span>chronyd.service <span class="o">&amp;&amp;</span> systemctl restart chronyd.service
</code></pre></div></div> <h3 id="其他cdh建议配置">其他CDH建议配置</h3> <p>禁用透明大页面压缩, 所有节点写入到 <em>/etc/rc.d/rc.local</em> 文件:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo </span>never <span class="o">&gt;</span> /sys/kernel/mm/transparent_hugepage/defrag
<span class="nb">echo </span>never <span class="o">&gt;</span> /sys/kernel/mm/transparent_hugepage/enabled
<span class="nb">chmod</span> +x /etc/rc.d/rc.local
</code></pre></div></div> <p>优化交换分区, 所有节点执行:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s2">"vm.swappiness = 10"</span> <span class="o">&gt;&gt;</span> /etc/sysctl.conf
</code></pre></div></div> <h2 id="所需组件安装及初始化-参考官方文档">所需组件安装及初始化, 参考<a href="https://docs.cloudera.com/documentation/enterprise/6/latest/topics/install_cm_cdh.html" target="_blank">官方文档</a></h2> <h3 id="jdk-所有节点安装">JDK, 所有节点安装:</h3> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum <span class="nt">-y</span> <span class="nb">install </span>java-1.8.0-openjdk.x86_64
</code></pre></div></div> <h3 id="mysql-任选一个节点安装-建议主节点">MySQL, 任选一个节点安装, 建议主节点</h3> <p>安装, 不做详述, 以下为主要命令:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>wget http://repo.mysql.com/mysql-community-release-el7-5.noarch.rpm
<span class="nv">$ </span>rpm <span class="nt">-ivh</span> mysql-community-release-el7-5.noarch.rpm
<span class="nv">$ </span>yum <span class="nt">-y</span> <span class="nb">install </span>mysql-server
<span class="nv">$ </span>systemctl <span class="nb">enable </span>mysqld <span class="o">&amp;&amp;</span> systemctl start mysqld
<span class="nv">$ </span>/usr/bin/mysql_secure_installation
</code></pre></div></div> <p>按需配置 <em>/etc/my.cnf</em>, 可参考<a href="https://docs.cloudera.com/documentation/enterprise/6/latest/topics/cm_ig_mysql.html#cmig_topic_5_5" target="_blank">CDH推荐配置</a></p> <p>创建 CDH 所需 database 和 user:</p> <div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">scm</span> <span class="k">DEFAULT</span> <span class="nb">CHARACTER</span> <span class="k">SET</span> <span class="n">utf8</span> <span class="k">DEFAULT</span> <span class="k">COLLATE</span> <span class="n">utf8_general_ci</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">amon</span> <span class="k">DEFAULT</span> <span class="nb">CHARACTER</span> <span class="k">SET</span> <span class="n">utf8</span> <span class="k">DEFAULT</span> <span class="k">COLLATE</span> <span class="n">utf8_general_ci</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">rman</span> <span class="k">DEFAULT</span> <span class="nb">CHARACTER</span> <span class="k">SET</span> <span class="n">utf8</span> <span class="k">DEFAULT</span> <span class="k">COLLATE</span> <span class="n">utf8_general_ci</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">hue</span> <span class="k">DEFAULT</span> <span class="nb">CHARACTER</span> <span class="k">SET</span> <span class="n">utf8</span> <span class="k">DEFAULT</span> <span class="k">COLLATE</span> <span class="n">utf8_general_ci</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">metastore</span> <span class="k">DEFAULT</span> <span class="nb">CHARACTER</span> <span class="k">SET</span> <span class="n">utf8</span> <span class="k">DEFAULT</span> <span class="k">COLLATE</span> <span class="n">utf8_general_ci</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">sentry</span> <span class="k">DEFAULT</span> <span class="nb">CHARACTER</span> <span class="k">SET</span> <span class="n">utf8</span> <span class="k">DEFAULT</span> <span class="k">COLLATE</span> <span class="n">utf8_general_ci</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">nav</span> <span class="k">DEFAULT</span> <span class="nb">CHARACTER</span> <span class="k">SET</span> <span class="n">utf8</span> <span class="k">DEFAULT</span> <span class="k">COLLATE</span> <span class="n">utf8_general_ci</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">navms</span> <span class="k">DEFAULT</span> <span class="nb">CHARACTER</span> <span class="k">SET</span> <span class="n">utf8</span> <span class="k">DEFAULT</span> <span class="k">COLLATE</span> <span class="n">utf8_general_ci</span><span class="p">;</span>
<span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">oozie</span> <span class="k">DEFAULT</span> <span class="nb">CHARACTER</span> <span class="k">SET</span> <span class="n">utf8</span> <span class="k">DEFAULT</span> <span class="k">COLLATE</span> <span class="n">utf8_general_ci</span><span class="p">;</span>

<span class="k">GRANT</span> <span class="k">ALL</span> <span class="k">ON</span> <span class="n">scm</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="s1">'scm'</span><span class="o">@</span><span class="s1">'%'</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">'cdh123@test'</span><span class="p">;</span>
<span class="k">GRANT</span> <span class="k">ALL</span> <span class="k">ON</span> <span class="n">amon</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="s1">'amon'</span><span class="o">@</span><span class="s1">'%'</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">'cdh123@test'</span><span class="p">;</span>
<span class="k">GRANT</span> <span class="k">ALL</span> <span class="k">ON</span> <span class="n">rman</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="s1">'rman'</span><span class="o">@</span><span class="s1">'%'</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">'cdh123@test'</span><span class="p">;</span>
<span class="k">GRANT</span> <span class="k">ALL</span> <span class="k">ON</span> <span class="n">hue</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="s1">'hue'</span><span class="o">@</span><span class="s1">'%'</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">'cdh123@test'</span><span class="p">;</span>
<span class="k">GRANT</span> <span class="k">ALL</span> <span class="k">ON</span> <span class="n">metastore</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="s1">'metastore'</span><span class="o">@</span><span class="s1">'%'</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">'cdh123@test'</span><span class="p">;</span>
<span class="k">GRANT</span> <span class="k">ALL</span> <span class="k">ON</span> <span class="n">sentry</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="s1">'sentry'</span><span class="o">@</span><span class="s1">'%'</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">'cdh123@test'</span><span class="p">;</span>
<span class="k">GRANT</span> <span class="k">ALL</span> <span class="k">ON</span> <span class="n">nav</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="s1">'nav'</span><span class="o">@</span><span class="s1">'%'</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">'cdh123@test'</span><span class="p">;</span>
<span class="k">GRANT</span> <span class="k">ALL</span> <span class="k">ON</span> <span class="n">navms</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="s1">'navms'</span><span class="o">@</span><span class="s1">'%'</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">'cdh123@test'</span><span class="p">;</span>
<span class="k">GRANT</span> <span class="k">ALL</span> <span class="k">ON</span> <span class="n">oozie</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="s1">'oozie'</span><span class="o">@</span><span class="s1">'%'</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">'cdh123@test'</span><span class="p">;</span>

<span class="n">FLUSH</span> <span class="k">PRIVILEGES</span><span class="p">;</span>
</code></pre></div></div> <h3 id="mysql-所在节点添加对应版本的-jdbc-驱动-主要命令">MySQL 所在节点添加对应版本的 jdbc 驱动, 主要命令:</h3> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>wget https://dev.mysql.com/get/Downloads/Connector-J/mysql-connector-java-5.1.46.tar.gz
<span class="nv">$ </span><span class="nb">tar </span>zxvf mysql-connector-java-5.1.46.tar.gz
<span class="nv">$ </span><span class="nb">cp </span>mysql-connector-java-5.1.46-bin.jar /usr/share/java/mysql-connector-java.jar <span class="c">##(主要去掉版本后缀)</span>
</code></pre></div></div> <h2 id="cdh-组件安装-参考官方文档">CDH 组件安装, 参考<a href="https://docs.cloudera.com/documentation/enterprise/6/latest/topics/install_cm_cdh.html" target="_blank">官方文档</a></h2> <h3 id="离线部署-cloudera-manager-server-及-agent">离线部署 Cloudera Manager Server 及 Agent</h3> <p>上传 cm6.3.1-redhat7.tar.gz 到所有节点并解压到 <em>/opt/cloudera-manager/</em> 目录下</p> <p>在<strong>主节点</strong>使用 <code class="language-plaintext highlighter-rouge">rpm</code> 离线安装 daemons, server 和 agent:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> /opt/cloudera-manager/cm6.3.1/RPMS/x86_64/
rpm <span class="nt">-ivh</span> cloudera-manager-daemons-6.3.1-1466458.el7.x86_64.rpm <span class="nt">--nodeps</span> <span class="nt">--force</span>
rpm <span class="nt">-ivh</span> cloudera-manager-server-6.3.1-1466458.el7.x86_64.rpm <span class="nt">--nodeps</span> <span class="nt">--force</span>
rpm <span class="nt">-ivh</span> cloudera-manager-agent-6.3.1-1466458.el7.x86_64.rpm <span class="nt">--nodeps</span> <span class="nt">--force</span>
</code></pre></div></div> <p>所有<strong>从节点</strong>使用 <code class="language-plaintext highlighter-rouge">rpm</code> 离线安装 daemons 和 agent:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> /opt/cloudera-manager/cm6.3.1/RPMS/x86_64/
rpm <span class="nt">-ivh</span> cloudera-manager-daemons-6.3.1-1466458.el7.x86_64.rpm <span class="nt">--nodeps</span> <span class="nt">--force</span>
rpm <span class="nt">-ivh</span> cloudera-manager-agent-6.3.1-1466458.el7.x86_64.rpm <span class="nt">--nodeps</span> <span class="nt">--force</span>
</code></pre></div></div> <p>修改所有<strong>从节点</strong>的 agent 配置, server 指向主节点 cdh-0001</p> <p>修改 <em>/etc/cloudera-scm-agent/config.ini</em> : <code class="language-plaintext highlighter-rouge">server_host=cdh-0001</code></p> <p>修改<strong>主节点</strong> <em>/etc/cloudera-scm-server/db.properties</em> 配置:</p> <p><em>(此处配置为上方 2.2.3 所创建的数据库和账号密码)</em></p> <div class="language-conf highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">com</span>.<span class="n">cloudera</span>.<span class="n">cmf</span>.<span class="n">db</span>.<span class="n">host</span>=<span class="n">cdh</span>-<span class="m">0001</span>
<span class="n">com</span>.<span class="n">cloudera</span>.<span class="n">cmf</span>.<span class="n">db</span>.<span class="n">name</span>=<span class="n">scm</span>
<span class="n">com</span>.<span class="n">cloudera</span>.<span class="n">cmf</span>.<span class="n">db</span>.<span class="n">user</span>=<span class="n">scm</span>
<span class="n">com</span>.<span class="n">cloudera</span>.<span class="n">cmf</span>.<span class="n">db</span>.<span class="n">password</span>=<span class="n">cdh123</span>@<span class="n">test</span>
<span class="c"># If scm-server uses Embedded DB then it is set to EMBEDDED
# If scm-server uses External DB then it is set to EXTERNAL
</span><span class="n">com</span>.<span class="n">cloudera</span>.<span class="n">cmf</span>.<span class="n">db</span>.<span class="n">setupType</span>=<span class="n">EXTERNAL</span>
</code></pre></div></div> <p>启动 Cloudera Manager Server 和 Agent:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 启动CM:</span>
systemctl <span class="nb">enable </span>cloudera-scm-server <span class="o">&amp;&amp;</span> systemctl start cloudera-scm-server
</code></pre></div></div> <p>查看日志, 解决出现的问题:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">tail</span> <span class="nt">-f</span> /var/log/cloudera-scm-server/cloudera-scm-server.log
</code></pre></div></div> <p>CM 启动成功后, 所有节点启动 Agent:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>systemctl <span class="nb">enable </span>cloudera-scm-agent <span class="o">&amp;&amp;</span> systemctl start cloudera-scm-agent
</code></pre></div></div> <p>浏览器启动 http://chd-0001:7180 页面配置集群</p> <h3 id="cloudera-manager-集群安装和设置">Cloudera Manager 集群安装和设置</h3> <p>欢迎页面, 一共三个步骤, 同意条款, 选择是否付费版本, 进入集群安装界面(<em>没有配图, 请自行脑补~</em>)</p> <h4 id="集群安装">集群安装</h4> <p>1). 欢迎界面</p> <p>2). 自定义集群名称</p> <p>3). 指定主机, 如果上面的 Agent 和配置全部正确, 不用搜索新主机, 所有主机会展示在 ‘当前管理的主机’ Tab下, 全选后进入下一步</p> <p>4). 选择存储库</p> <p> a. 将离线包: CDH-6.3.2-1.cdh6.3.2.p0.1605554-el7.parcel 和 CDH-6.3.2-1.cdh6.3.2.p0.1605554-el7.parcel.sha (此文件为 parcel 的 hash 码, 注意不要随意修改) 拷贝到 <em>/opt/cloudera/parcel-repo</em> 目录</p> <p> b. 修改改目录下所有文件权限:</p> <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="nb">chown</span> <span class="nt">-R</span> cloudera-scm:cloudera-scm /opt/cloudera/parcel-repo/<span class="k">*</span>
</code></pre></div></div> <p> c. 点击 ‘使用Parcel(建议)’ 后的更多选项按钮, 移除所有远程 Parcel 库, 保存</p> <p> d. 如果没有问题会默认选中拷贝的离线 Parcel 包</p> <p> e. 点击继续</p> <p>5). 安装 Parcel, 由于上一步配置好了离线 Parcel, 这里只需要等待分配, 解压和激活三个步骤自动完成</p> <p>6). 检查集群</p> <p> <em>可能会出现的问题包括上方步骤1.5出现两个配置项和修复 Psycopg2 版本较低(忽略)</em></p> <p>7). 问题全部解决后进入集群设置</p> <h4 id="集群配置">集群配置</h4> <p>1). 选择需要的服务, 常用: HDFS, HIVE, YARN, Spark, Zookeeper 等, 根据需要执行选择</p> <p>2). 自定义角色分配, 设置每个服务的角色和运行的节点, 根据情况设置</p> <p>3). 数据设置, 如果上一步没有选择‘Activity Monitor’, 这一步骤会被省略, 所以 Activity Monitor 最好选择 cdh-0001 (MySQL 安装的节点)</p> <p> 输入数据库 <code class="language-plaintext highlighter-rouge">amon</code>, 用户名 <code class="language-plaintext highlighter-rouge">amon</code> 和密码 <code class="language-plaintext highlighter-rouge">cdh123@test</code> (2.2.3的设置), 测试连接</p> <p>4). 审核更改, 此步骤会设置所选角色的部分基础文件目录, 根据情况修改</p> <p>5). 执行命令详细信息, 等待自动运行完成, 全部通过后继续</p> <p>6). 至此所有安装步骤完成, 可进入 Cloudera Manager 进行集群监控和管理</p> <p><br /></p> <div class="post-tags"> <nav class="nav-post-tags-list"> <ul class="tags"> <li><a href="/tag/big-data/">Big Data</a></li> <li><a href="/tag/cdh/">CDH</a></li> </ul> </nav> </div> </main> <footer> <hr class="footer-hr"> <div class="ui-flex"> <div class='wrapper-footer'> © 2023 LanKE.e 婪歌 | <a href="mailto:dr.xx.yvens@gmail.com">Yven Fong</a> </div> </div> </footer> </div> </body> </html>
